@page "/suggestion/{id:int}"
@using Nordic_Door.Shared.Models.API;
@inject HttpClient httpClient
@inject NavigationManager Navigation

<!-- https://mudblazor.com/components/grid#basic-grid -->
<style>

    .container {
        height: 100%;
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .info-container {
        display: flex;
        flex-direction: column;
        align-items: center;

        gap: 0.5rem
    }
    .paper {
        height: 100%;
        display: flex;
        flex-direction: column;
        background: #fafafa;
        border: 2px solid #bdbdbd;
        border-radius: 25px;
        gap: 1rem;
        padding: 1rem 0.4rem; 

    }

    .paper .mud-typography {
         font-size: 1.5rem;
            font-weight:500;
        }

    .title-container {
        display: flex;
        flex-direction: column;
        margin-left: 1rem;
    }
    .title-container .title-heading {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding-bottom: 0.4rem;

    }
    .icon-container {
        display: flex;
        gap: 0.5rem;
        align-items: center;
    }
 
    </style>
@if(loading) {
    <MudProgressCircular Color="Color.Primary" Size="Size.Large" Indeterminate="true"/>
} else {
    <MudGrid Style="margin-top: 10px;">

        <MudItem xs="3">
            <div class="paper">
              <div class="info-container">
                  <div class="icon-container">
                        <MudIcon Icon="@Icons.Filled.Info" />
                        <MudText>Status</MudText>
                  </div>
                    <MudChip Variant="Variant.Outlined" Color="Color.Info">@suggestion.Status</MudChip>

                </div>
                <div class="info-container">
                    <div class="icon-container">
                        <MudIcon Icon="@Icons.Filled.AssignmentTurnedIn" />
                        <MudText>Fase</MudText>
                    </div>
                    <MudChip Variant="Variant.Outlined" Color="Color.Info">@suggestion.Phase</MudChip>

                </div>
                <MudDivider DividerType="DividerType.Middle" Class="my-6" Style="background-color: #9e9e9e; "/>
                <div class="info-container">
                <div class="icon-container">
                    <MudIcon Icon="@Icons.Filled.Person" />
                    <MudText>Ansvarlig Ansatt</MudText>
                </div>
                <MudTextField @bind-Value="suggestion.ResponsibleEmployee.Name" ReadOnly="true" Variant="Variant.Outlined"/>

            </div>
                <div class="info-container">
                    <div class="icon-container">
                        <MudIcon Icon="@Icons.Filled.People" />
                        <MudText>Ansvarlig Team</MudText>
                    </div>
                    <MudTextField @bind-Value="suggestion.ResponsibleTeam.Name" ReadOnly="true" Variant="Variant.Outlined" />

                </div>
                <MudDivider DividerType="DividerType.Middle" Class="my-6" Style="background-color: #9e9e9e;" />
                <div class="info-container">
                    <div class="icon-container">
                        <MudIcon Icon="@Icons.Filled.AccessTime" />
                        <MudText>Sist oppdatert</MudText>
                    </div>
                    <MudTextField @bind-Value="@suggestion.LastUpdatedAt" T="DateTime?" ReadOnly="true" Format="yyyy-MM-dd HH:mm:ss" Variant="Variant.Outlined" />

                </div>
                <div class="info-container">
                    <div class="icon-container">
                        <MudIcon Icon="@Icons.Filled.AssignmentLate" />
                        <MudText>Frist</MudText>
                    </div>
                    <MudTextField @bind-Value="@suggestion.DeadLine" T="DateTime?" ReadOnly="true" Format="yyyy-MM-dd HH:mm:ss" Variant="Variant.Outlined" />

                </div>

            </div>
        </MudItem>
        <MudItem xs="6">
            <div class="paper" style="height: 100%;">
                <div class="title-container">
                    <div class="title-heading">

             
                    <MudIcon Icon="@Icons.Filled.Assignment" Style="display: inline;"/>
                        <MudText>@suggestion.Title</MudText>
                                   </div>
                    <MudText Style="font-weight: 200; font-size: 17px;">#@suggestion.Id &bull; 
                        <MudIcon Icon="@Icons.Outlined.Person" Style="position: relative; top: 20%;"/> @suggestion.CreatedBy.Name</MudText>
                </div>
                <MudDivider Style="background-color: #9e9e9e;" />
            </div>
        </MudItem>
        <MudItem xs="3">

        </MudItem>
        <MudItem xs="12">
            <div>
            </div>
        </MudItem>
    </MudGrid>
}

@code {
    [Parameter]
    public int id { get; set; }

    private GetSuggestionRequest suggestion;

    private bool loading = true;
    protected override async Task OnInitializedAsync()
    {
        suggestion = await httpClient.GetFromJsonAsync<GetSuggestionRequest>("api/Suggestions/" + id);
        loading = false;

    }

}
