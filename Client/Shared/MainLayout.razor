@inherits LayoutComponentBase
@inject HttpClient httpClient
@inject AltairCA.Blazor.WebAssembly.Cookie.IAltairCABlazorCookieUtil _cookieUtil;
@inject ISnackbar Snackbar
@using Nordic_Door.Shared.Models.Common;
@inject NavigationManager Navigation


<MudThemeProvider Theme="MyCustomTheme" />
<MudDialogProvider />
<MudSnackbarProvider />
<MudLayout Style="background-color:#e9e9e8">
    <CascadingValue Value="user">
        <AppHeader/>
    <MudMainContent Style="margin-left: 1.5rem; height: 100%; margin-right: 1.5rem; margin-top: 1rem; background-color: #e9e9e8">
        @if(loggedIn) {
             @Body
        } else {
            <Login/>
        }
    </MudMainContent>
    </CascadingValue>
</MudLayout>



@code{
    private UserRelation user { get; set; }
    private bool loggedIn;

    protected override async Task OnInitializedAsync(){
        var id = await _cookieUtil.GetValueAsync("nd_login_id");

        if(id == null) {
            Snackbar.Add("Du er ikke logget inn", Severity.Error);
        } 
    }
    
    MudTheme MyCustomTheme = new MudTheme()
        {
            Palette = new Palette()
            {
                Primary = Colors.Blue.Accent4,
                Secondary = Colors.Red.Accent3,
                
               
            },
          
           
        };
}